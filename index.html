<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Korean Language Superpower Quiz</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        html, body {
            font-family: 'Press Start 2P', cursive;
            background: url('https://cdn.shopify.com/s/files/1/0674/6747/7282/files/sky.png?v=1750990355') repeat;
            margin: 0;
            padding: 0;
            color: white;
            min-height: 100vh;
        }
        
        .container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 2rem;
            background: url('https://cdn.shopify.com/s/files/1/0674/6747/7282/files/sky.png?v=1750990355') repeat;
            backdrop-filter: blur(10px);
            z-index: 2147483647;
            animation: fadeInUp 0.8s ease-out;
        }
        
        .quiz-page {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            text-align: center;
            padding: 2rem;
            background: url('https://cdn.shopify.com/s/files/1/0674/6747/7282/files/sky.png?v=1750990355') repeat;
            backdrop-filter: blur(10px);
            z-index: 2147483647;
            animation: fadeInUp 0.8s ease-out;
            padding-top: 50px;
            overflow-y: auto;
            display: none;
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        h1 {
            font-family: 'Press Start 2P', cursive;
            font-size: clamp(1rem, 4vw, 2rem);
            margin-bottom: 1rem;
            color: white;
            text-shadow: 
                -2px -2px 0 #31afed,
                2px -2px 0 #31afed,
                -2px 2px 0 #31afed,
                2px 2px 0 #31afed,
                -2px 0 0 #31afed,
                2px 0 0 #31afed,
                0 -2px 0 #31afed,
                0 2px 0 #31afed;
            line-height: 1.2;
            text-align: center;
        }
        
        .stars {
            color: #f9ca24;
            font-size: clamp(1.5rem, 6vw, 3rem);
            margin: 0.5rem 0 2rem 0;
            text-shadow: 
                -1px -1px 0 #000000,
                1px -1px 0 #000000,
                -1px 1px 0 #000000,
                1px 1px 0 #000000;
        }
        
        .description {
            font-size: clamp(0.7rem, 2.5vw, 1rem);
            margin: 0 auto 2rem auto;
            opacity: 0.9;
            max-width: 600px;
            text-align: center;
            line-height: 1.4;
            width: 100%;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 2rem;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .start-button {
            padding: clamp(12px, 3vw, 16px) clamp(24px, 5vw, 32px);
            font-size: clamp(0.8rem, 3vw, 1rem);
            border: none;
            border-radius: 50px;
            background: #e74c3c;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-family: 'Press Start 2P', cursive;
            margin-top: 1rem;
            box-shadow: 0 4px 15px rgba(231, 76, 60, 0.3);
        }
        
        .start-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(231, 76, 60, 0.4);
        }
        
        .start-button:active {
            transform: translateY(0);
        }
        
        /* Quiz styles */
        .quiz-container {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 2rem;
            margin: 1rem auto;
            max-width: 800px;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            text-align: left;
            width: 100%;
        }
        
        .word-item {
            display: flex;
            align-items: center;
            margin-bottom: 1.5rem;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }
        
        .word-item:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.2);
        }
        
        .word-item input[type="checkbox"] {
            width: 20px;
            height: 20px;
            margin-right: 1rem;
            cursor: pointer;
            accent-color: #e74c3c;
        }
        
        .word-text {
            font-size: clamp(1rem, 3vw, 1.3rem);
            line-height: 1.4;
            flex: 1;
        }
        
        .korean-word {
            color: #f9ca24;
            font-weight: bold;
        }
        
        .english-translation {
            color: #31afed;
        }
        
        .submit-button {
            padding: clamp(12px, 3vw, 16px) clamp(24px, 5vw, 32px);
            font-size: clamp(0.7rem, 2.5vw, 0.9rem);
            border: none;
            border-radius: 50px;
            background: #e74c3c;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-family: 'Press Start 2P', cursive;
            margin-top: 2rem;
            box-shadow: 0 4px 15px rgba(231, 76, 60, 0.3);
            display: block;
            margin-left: auto;
            margin-right: auto;
        }
        
        .submit-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(231, 76, 60, 0.4);
        }
        
        .submit-button:active {
            transform: translateY(0);
        }
        
        /* Test 2 Multiple Choice Styles */
        .question-item {
            margin-bottom: 2rem;
            padding: 1.5rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .question-text {
            font-size: clamp(0.9rem, 2.8vw, 1.1rem);
            margin-bottom: 1rem;
            line-height: 1.5;
            color: #f9ca24;
        }
        
        .options {
            display: flex;
            flex-direction: column;
            gap: 0.8rem;
        }
        
        .option {
            display: flex;
            align-items: center;
            padding: 0.8rem;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .option:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.2);
        }
        
        .option input[type="radio"] {
            width: 18px;
            height: 18px;
            margin-right: 0.8rem;
            cursor: pointer;
            accent-color: #e74c3c;
        }
        
        .option span {
            font-size: clamp(0.9rem, 2.8vw, 1.1rem);
            line-height: 1.4;
            color: white;
        }
        
        /* Test 3 Audio and Text Input Styles */
        .audio-container {
            margin: 1.5rem 0;
            text-align: center;
        }
        
        .audio-container audio {
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.1);
        }
        
        .text-question {
            margin-top: 2rem;
        }
        
        .question-label {
            display: block;
            font-size: clamp(1rem, 3vw, 1.2rem);
            color: #f9ca24;
            margin-bottom: 1rem;
            font-weight: bold;
        }
        
        .text-input {
            width: 100%;
            min-height: 100px;
            padding: 1rem;
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.05);
            color: white;
            font-family: 'Press Start 2P', cursive;
            font-size: clamp(0.8rem, 2.5vw, 1rem);
            line-height: 1.4;
            resize: vertical;
            backdrop-filter: blur(5px);
        }
        
        .text-input:focus {
            outline: none;
            border-color: #e74c3c;
            background: rgba(255, 255, 255, 0.1);
            box-shadow: 0 0 10px rgba(231, 76, 60, 0.3);
        }
        
        .text-input::placeholder {
            color: rgba(255, 255, 255, 0.5);
            font-family: Arial, sans-serif;
            font-size: 0.9rem;
        }
        
        /* Test 4 Writing Styles */
        .writing-section {
            margin-top: 2rem;
        }
        
        .writing-input {
            width: 100%;
            min-height: 300px;
            padding: 1.5rem;
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            background: rgba(255, 255, 255, 0.05);
            color: white;
            font-family: Arial, sans-serif;
            font-size: clamp(1rem, 3vw, 1.1rem);
            line-height: 1.6;
            resize: vertical;
            backdrop-filter: blur(5px);
        }
        
        .writing-input:focus {
            outline: none;
            border-color: #e74c3c;
            background: rgba(255, 255, 255, 0.1);
            box-shadow: 0 0 15px rgba(231, 76, 60, 0.3);
        }
        
        .writing-input::placeholder {
            color: rgba(255, 255, 255, 0.5);
            font-style: italic;
        }
        
        .question-text ul {
            color: #31afed;
            font-size: clamp(0.8rem, 2.5vw, 1rem);
        }
        
        .question-text ul li {
            margin-bottom: 0.5rem;
        }
        
        /* Test-specific question text colors */
        #test2Page .question-text {
            color: #3498db; /* Blue for Test 2 */
        }
        
        #test3Page .question-label {
            color: #e91e63; /* Pink for Test 3 */
        }
        
        #test4Page .question-text {
            color: #9b59b6; /* Purple for Test 4 */
        }
        
        /* Final Page Contact Form Styles */
        .contact-form {
            margin-top: 2rem;
        }
        
        .form-field {
            margin-bottom: 2rem;
        }
        
        .form-input {
            width: 100%;
            padding: 1rem 1.5rem;
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.05);
            color: white;
            font-family: Arial, sans-serif;
            font-size: clamp(1rem, 3vw, 1.1rem);
            backdrop-filter: blur(5px);
        }
        
        .form-input:focus {
            outline: none;
            border-color: #e74c3c;
            background: rgba(255, 255, 255, 0.1);
            box-shadow: 0 0 10px rgba(231, 76, 60, 0.3);
        }
        
        .form-input::placeholder {
            color: rgba(255, 255, 255, 0.5);
            font-style: italic;
        }
        
        /* Confetti Animation */
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: #f39c12;
            animation: confetti-fall 3s linear infinite;
            z-index: 999999;
        }
        
        .confetti:nth-child(odd) {
            background: #e74c3c;
            width: 8px;
            height: 8px;
            animation-duration: 2.5s;
        }
        
        .confetti:nth-child(even) {
            background: #3498db;
            width: 6px;
            height: 6px;
            animation-duration: 3.5s;
        }
        
        .confetti:nth-child(3n) {
            background: #2ecc71;
            width: 8px;
            height: 8px;
            animation-duration: 2.8s;
        }
        
        .confetti:nth-child(4n) {
            background: #9b59b6;
            width: 6px;
            height: 6px;
            animation-duration: 3.2s;
        }
        
        @keyframes confetti-fall {
            0% {
                transform: translateY(-100vh) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }
        
        @keyframes confettiDrop {
            0% {
                transform: translateY(-10px) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }
        
        /* Mobile responsive adjustments */
        @media (max-width: 768px) {
            .container, .quiz-page {
                padding: 1rem;
            }
            
            .quiz-container {
                padding: 1.5rem;
            }
            
            .word-item {
                padding: 0.8rem;
                margin-bottom: 1rem;
            }
            
            .word-item input[type="checkbox"] {
                width: 16px;
                height: 16px;
                margin-right: 0.8rem;
            }
        }
    </style>
</head>
<body>
    <!-- Title Page -->
    <div class="container" id="titlePage">
        <h1>ğŸ‡°ğŸ‡· What's Your Korean Language Superpower?</h1>
        <div class="stars">â­â­â­â­â­</div>
        <div class="description">
            We'll rank your Korean language skills (out of 5 stars).<br>
            We'll send you a personalized improvement plan at the end.
        </div>
        <button class="start-button" onclick="showQuiz()">
            ğŸš€ Let's Start!
        </button>
    </div>

    <!-- Disclaimer Page -->
    <div class="quiz-page" id="disclaimerPage" style="display: none;">
        <h1>ğŸ“‹ Before You Begin</h1>
        <div class="description">
            Important instructions for taking this assessment.
        </div>
        
        <div class="quiz-container">
            <div class="question-item">
                <div class="question-text" style="color: #f9ca24; text-align: center; line-height: 1.6;">
                    <strong>ğŸ“ Instructions:</strong><br><br>
                    If you do not know the answer to a question, just leave it blank.<br><br>
                    There's no penalty for unanswered questions, so don't worry if you encounter something unfamiliar!<br><br>
                    Take your time and do your best. âœ¨
                </div>
            </div>
            
            <button class="submit-button" onclick="startActualQuiz()">
                ğŸš€ I Understand - Start Quiz!
            </button>
        </div>
    </div>

    <!-- Quiz Page -->
    <div class="quiz-page" id="quizPage">
        <h1>Test 1: Which One's Wrong?</h1>
        <div class="description">
            Check off the words that DO NOT match!
        </div>
        
        <div class="quiz-container">
            <div class="word-item">
                <input type="checkbox" id="wordA" name="wrong-words" value="A">
                <label for="wordA" class="word-text">
                    <strong>A.</strong> <span class="korean-word">í•™êµ</span> â€“ <span class="english-translation">school</span>
                </label>
            </div>
            
            <div class="word-item">
                <input type="checkbox" id="wordB" name="wrong-words" value="B">
                <label for="wordB" class="word-text">
                    <strong>B.</strong> <span class="korean-word">ì‚¬ëŒ</span> â€“ <span class="english-translation">apple</span>
                </label>
            </div>
            
            <div class="word-item">
                <input type="checkbox" id="wordC" name="wrong-words" value="C">
                <label for="wordC" class="word-text">
                    <strong>C.</strong> <span class="korean-word">ë¬¼</span> â€“ <span class="english-translation">water</span>
                </label>
            </div>
            
            <div class="word-item">
                <input type="checkbox" id="wordD" name="wrong-words" value="D">
                <label for="wordD" class="word-text">
                    <strong>D.</strong> <span class="korean-word">ìˆ˜ì˜í•˜ë‹¤</span> â€“ <span class="english-translation">to swim</span>
                </label>
            </div>
            
            <div class="word-item">
                <input type="checkbox" id="wordE" name="wrong-words" value="E">
                <label for="wordE" class="word-text">
                    <strong>E.</strong> <span class="korean-word">ë§í•˜ë‹¤</span> â€“ <span class="english-translation">to cry</span>
                </label>
            </div>
            
            <div class="word-item">
                <input type="checkbox" id="wordF" name="wrong-words" value="F">
                <label for="wordF" class="word-text">
                    <strong>F.</strong> <span class="korean-word">ì¼ì–´ë‚˜ë‹¤</span> â€“ <span class="english-translation">to get up</span>
                </label>
            </div>
            
            <div class="word-item">
                <input type="checkbox" id="wordG" name="wrong-words" value="G">
                <label for="wordG" class="word-text">
                    <strong>G.</strong> <span class="korean-word">ì˜ê²¬</span> â€“ <span class="english-translation">opinion</span>
                </label>
            </div>
            
            <div class="word-item">
                <input type="checkbox" id="wordH" name="wrong-words" value="H">
                <label for="wordH" class="word-text">
                    <strong>H.</strong> <span class="korean-word">ëª©ì </span> â€“ <span class="english-translation">schedule</span>
                </label>
            </div>
            
            <div class="word-item">
                <input type="checkbox" id="wordI" name="wrong-words" value="I">
                <label for="wordI" class="word-text">
                    <strong>I.</strong> <span class="korean-word">ìˆ˜ìµ</span> â€“ <span class="english-translation">profit</span>
                </label>
            </div>
            
            <div class="word-item">
                <input type="checkbox" id="wordJ" name="wrong-words" value="J">
                <label for="wordJ" class="word-text">
                    <strong>J.</strong> <span class="korean-word">ì£¼ì¥í•˜ë‹¤</span> â€“ <span class="english-translation">to hesitate</span>
                </label>
            </div>
            
            <div class="word-item">
                <input type="checkbox" id="wordK" name="wrong-words" value="K">
                <label for="wordK" class="word-text">
                    <strong>K.</strong> <span class="korean-word">ë³´ì™„í•˜ë‹¤</span> â€“ <span class="english-translation">to supplement</span>
                </label>
            </div>
            
            <div class="word-item">
                <input type="checkbox" id="wordL" name="wrong-words" value="L">
                <label for="wordL" class="word-text">
                    <strong>L.</strong> <span class="korean-word">ì¸ì‹í•˜ë‹¤</span> â€“ <span class="english-translation">to ignore</span>
                </label>
            </div>
            
            <div class="word-item">
                <input type="checkbox" id="wordM" name="wrong-words" value="M">
                <label for="wordM" class="word-text">
                    <strong>M.</strong> <span class="korean-word">ì •ë‹¹í™”í•˜ë‹¤</span> â€“ <span class="english-translation">to justify</span>
                </label>
            </div>
            
            <div class="word-item">
                <input type="checkbox" id="wordN" name="wrong-words" value="N">
                <label for="wordN" class="word-text">
                    <strong>N.</strong> <span class="korean-word">ì´‰ì§„í•˜ë‹¤</span> â€“ <span class="english-translation">to warn</span>
                </label>
            </div>
            
            <div class="word-item">
                <input type="checkbox" id="wordO" name="wrong-words" value="O">
                <label for="wordO" class="word-text">
                    <strong>O.</strong> <span class="korean-word">ê³ ì°°í•˜ë‹¤</span> â€“ <span class="english-translation">to examine (deeply)</span>
                </label>
            </div>
            
            <button class="submit-button" onclick="submitTest1()">
                ğŸ“ Submit Test 1
            </button>
        </div>
    </div>

    <!-- Test 2 Page -->
    <div class="quiz-page" id="test2Page" style="display: none;">
        <h1>Test 2: Grammar Boss or Beginner?</h1>
        <div class="description">
            Choose the best answer for each question.
        </div>
        
        <div class="quiz-container">
            <div class="question-item">
                <div class="question-text">
                    <strong>1. Complete the Sentence</strong><br>
                    ë‚˜ëŠ” ì‚¬ê³¼ë¥¼ ______.
                </div>
                <div class="options">
                    <label class="option">
                        <input type="radio" name="q1" value="A">
                        <span>A. ë¨¹ì–´ìš”</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q1" value="B">
                        <span>B. ë§ˆì…”ìš”</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q1" value="C">
                        <span>C. ì…ì–´ìš”</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q1" value="D">
                        <span>D. íƒ€ìš”</span>
                    </label>
                </div>
            </div>

            <div class="question-item">
                <div class="question-text">
                    <strong>2. Pick the Right Particle</strong><br>
                    ì—„ë§ˆ____ ì„ ë¬¼ì„ ì¤¬ì–´ìš”.
                </div>
                <div class="options">
                    <label class="option">
                        <input type="radio" name="q2" value="A">
                        <span>A. ì—</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q2" value="B">
                        <span>B. ì™€</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q2" value="C">
                        <span>C. í•œí…Œ</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q2" value="D">
                        <span>D. ìœ¼ë¡œ</span>
                    </label>
                </div>
            </div>

            <div class="question-item">
                <div class="question-text">
                    <strong>3. Which Sentence is Wrong?</strong>
                </div>
                <div class="options">
                    <label class="option">
                        <input type="radio" name="q3" value="A">
                        <span>A. ì €ëŠ” ì–´ì œ ë„ì„œê´€ì— ê°”ì–´ìš”.</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q3" value="B">
                        <span>B. ìš°ë¦¬ëŠ” ë§›ìˆëŠ” ìŒì‹ì„ ë¨¹ì—ˆì–´ìš”.</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q3" value="C">
                        <span>C. ê·¸ëŠ” ì˜í™”ë¥¼ ë³´ë©´ì„œ ë¨¹ì–´ìš”.</span>
                    </label>
                </div>
            </div>

            <div class="question-item">
                <div class="question-text">
                    <strong>4. Match the Tense</strong><br>
                    Context: "Tomorrow, I will meet my friend."
                </div>
                <div class="options">
                    <label class="option">
                        <input type="radio" name="q4" value="A">
                        <span>A. ë§Œë‚¬ì–´ìš”</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q4" value="B">
                        <span>B. ë§Œë‚˜ìš”</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q4" value="C">
                        <span>C. ë§Œë‚  ê±°ì˜ˆìš”</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q4" value="D">
                        <span>D. ë§Œë‚˜ê³  ìˆì–´ìš”</span>
                    </label>
                </div>
            </div>

            <div class="question-item">
                <div class="question-text">
                    <strong>5. Complete the Sentence</strong><br>
                    ì•„ì´ê°€ ë„˜ì–´ì ¸ì„œ í¬ê²Œ ______.
                </div>
                <div class="options">
                    <label class="option">
                        <input type="radio" name="q5" value="A">
                        <span>A. ì›ƒì–´ìš”</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q5" value="B">
                        <span>B. ìš¸ì–´ìš”</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q5" value="C">
                        <span>C. ììš”</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q5" value="D">
                        <span>D. ë§í•´ìš”</span>
                    </label>
                </div>
            </div>

            <div class="question-item">
                <div class="question-text">
                    <strong>6. Pick the Right Particle</strong><br>
                    ì±…ìƒ____ ì—°í•„ì´ ìˆì–´ìš”.
                </div>
                <div class="options">
                    <label class="option">
                        <input type="radio" name="q6" value="A">
                        <span>A. ìœ„ì—</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q6" value="B">
                        <span>B. ìœ¼ë¡œ</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q6" value="C">
                        <span>C. ì˜</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q6" value="D">
                        <span>D. í•œí…Œ</span>
                    </label>
                </div>
            </div>

            <div class="question-item">
                <div class="question-text">
                    <strong>7. Which Sentence is Wrong?</strong>
                </div>
                <div class="options">
                    <label class="option">
                        <input type="radio" name="q7" value="A">
                        <span>A. ê·¸ëŠ” ë§¤ì¼ ì•„ì¹¨ ìš´ë™ì„ í•´ìš”.</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q7" value="B">
                        <span>B. ì €ëŠ” ì»¤í”¼ë¥¼ ë§ˆì‹œëŠ” ê±¸ ì¢‹ì•„í•´ìš”.</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q7" value="C">
                        <span>C. ë‚´ì¼ ë¹„ê°€ ì˜¤ëŠ” ë‚ ì”¨ì˜ˆìš”.</span>
                    </label>
                </div>
            </div>

            <div class="question-item">
                <div class="question-text">
                    <strong>8. Match the Tense</strong><br>
                    Context: "Back then, I didn't understand the situation well."
                </div>
                <div class="options">
                    <label class="option">
                        <input type="radio" name="q8" value="A">
                        <span>A. ì´í•´í•˜ê³  ìˆì–´ìš”</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q8" value="B">
                        <span>B. ì´í•´í•  ê±°ì˜ˆìš”</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q8" value="C">
                        <span>C. ì´í•´í–ˆì–´ìš”</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q8" value="D">
                        <span>D. ì˜ ì´í•´í•˜ì§€ ëª»í–ˆì–´ìš”</span>
                    </label>
                </div>
            </div>

            <div class="question-item">
                <div class="question-text">
                    <strong>9. Complete the Sentence</strong><br>
                    ê·¸ëŠ” ëª¨ë“  ì¡°ê±´ì„ ______ ê³„ì•½ì„ ì²´ê²°í–ˆë‹¤.
                </div>
                <div class="options">
                    <label class="option">
                        <input type="radio" name="q9" value="A">
                        <span>A. ì¶©ì¡±í•˜ê³ </span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q9" value="B">
                        <span>B. ì¶©ì¡±í•´ë„</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q9" value="C">
                        <span>C. ì¶©ì¡±í•˜ë‹ˆê¹Œ</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q9" value="D">
                        <span>D. ì¶©ì¡±í•œë‹¤ë©´</span>
                    </label>
                </div>
            </div>
            
            <button class="submit-button" onclick="submitTest2()">
                ğŸ“ Submit Test 2
            </button>
        </div>
    </div>

    <!-- Test 3 Page -->
    <div class="quiz-page" id="test3Page" style="display: none;">
        <h1>Test 3: K-Listening Check</h1>
        <div class="description">
            Test your listening skills!
        </div>
        
        <div class="quiz-container">
            <div class="question-item">
                <div class="question-text">
                    <strong>1. Listen to the audio and answer the question:</strong>
                </div>
                
                <div class="audio-container">
                    <audio controls style="width: 100%; margin: 1rem 0;">
                        <source src="https://cdn.shopify.com/s/files/1/0674/6747/7282/files/Vocaroo_16bv8AkaaZpY.mp3?v=1752546366" type="audio/mpeg">
                        Your browser does not support the audio element.
                    </audio>
                </div>
                
                <div class="text-question">
                    <label for="answer1" class="question-label">Q. Where is Minsu?</label>
                    <textarea id="answer1" name="answer1" placeholder="Type your answer here..." class="text-input"></textarea>
                </div>
            </div>

            <div class="question-item">
                <div class="question-text">
                    <strong>2. Listen to the audio and answer the question:</strong>
                </div>
                
                <div class="audio-container">
                    <audio controls style="width: 100%; margin: 1rem 0;">
                        <source src="https://cdn.shopify.com/s/files/1/0674/6747/7282/files/Vocaroo_1mlUgOk9cAej.mp3?v=1752547162" type="audio/mpeg">
                        Your browser does not support the audio element.
                    </audio>
                </div>
                
                <div class="text-question">
                    <label for="answer2" class="question-label">Q. What is Calvin going to buy?</label>
                    <textarea id="answer2" name="answer2" placeholder="Type your answer here..." class="text-input"></textarea>
                </div>
            </div>

            <div class="question-item">
                <div class="question-text">
                    <strong>3. Listen to the audio and answer the question:</strong>
                </div>
                
                <div class="audio-container">
                    <audio controls style="width: 100%; margin: 1rem 0;">
                        <source src="https://cdn.shopify.com/s/files/1/0674/6747/7282/files/Vocaroo_11Cnxy2Wknnk.mp3?v=1752547267" type="audio/mpeg">
                        Your browser does not support the audio element.
                    </audio>
                </div>
                
                <div class="text-question">
                    <label for="answer3" class="question-label">Q. What did the speaker do at the amusement park?</label>
                    <textarea id="answer3" name="answer3" placeholder="Type your answer here..." class="text-input"></textarea>
                </div>
            </div>

            <div class="question-item">
                <div class="question-text">
                    <strong>4. Listen to the audio and answer the question:</strong>
                </div>
                
                <div class="audio-container">
                    <audio controls style="width: 100%; margin: 1rem 0;">
                        <source src="https://cdn.shopify.com/s/files/1/0674/6747/7282/files/Vocaroo_14ns26gObwXr.mp3?v=1752547299" type="audio/mpeg">
                        Your browser does not support the audio element.
                    </audio>
                </div>
                
                <div class="text-question">
                    <label for="answer4" class="question-label">Q. Why are companies introducing flexible work systems?</label>
                    <textarea id="answer4" name="answer4" placeholder="Type your answer here..." class="text-input"></textarea>
                </div>
            </div>
            
            <button class="submit-button" onclick="submitTest3()">
                ğŸ“ Submit Test 3
            </button>
        </div>
    </div>

    <!-- Test 4 Page -->
    <div class="quiz-page" id="test4Page" style="display: none;">
        <h1>Test 4: How Well Do You Know K-dramas?</h1>
        <div class="description">
            Fill in the blank with the correct word! For our K-drama fanatics, these sentences are commonly pulled from your favorite dramas.
        </div>
        
        <div class="quiz-container">
            <div class="question-item">
                <div class="question-text">
                    <strong>Q1.</strong> â¤ï¸ ì •ë§ _______ ì¢‹ì•„í•´ìš”!
                </div>
                <div class="options">
                    <label class="option">
                        <input type="radio" name="q1" value="A">
                        <span>A. í•™êµ</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q1" value="B">
                        <span>B. ë„ˆë¥¼</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q1" value="C">
                        <span>C. ë²„ìŠ¤</span>
                    </label>
                </div>
            </div>

            <div class="question-item">
                <div class="question-text">
                    <strong>Q2.</strong> â˜• ì €ëŠ” ì•„ì¹¨ë§ˆë‹¤ ì»¤í”¼ë¥¼ _______.
                </div>
                <div class="options">
                    <label class="option">
                        <input type="radio" name="q2" value="A">
                        <span>A. ë§ˆì…”ìš”</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q2" value="B">
                        <span>B. ì…ì–´ìš”</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q2" value="C">
                        <span>C. íƒ€ìš”</span>
                    </label>
                </div>
            </div>

            <div class="question-item">
                <div class="question-text">
                    <strong>Q3.</strong> ğŸ˜² ê·¸ ì†Œì‹ì„ ë“£ê³  ë„ˆë¬´ ________.
                </div>
                <div class="options">
                    <label class="option">
                        <input type="radio" name="q3" value="A">
                        <span>A. í”¼ê³¤í–ˆì–´ìš”</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q3" value="B">
                        <span>B. ë°˜ê°€ì› ì–´ìš”</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q3" value="C">
                        <span>C. ë‹«ì•˜ì–´ìš”</span>
                    </label>
                </div>
            </div>

            <div class="question-item">
                <div class="question-text">
                    <strong>Q4.</strong> ğŸ“… ê·¸ ì‚¬ëŒì€ í•­ìƒ ì•½ì†ì„ ________.
                </div>
                <div class="options">
                    <label class="option">
                        <input type="radio" name="q4" value="A">
                        <span>A. ê¸°ì–µí•´ìš”</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q4" value="B">
                        <span>B. ì§€ì¼œìš”</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q4" value="C">
                        <span>C. ì„¸ì›Œìš”</span>
                    </label>
                </div>
            </div>

            <div class="question-item">
                <div class="question-text">
                    <strong>Q5.</strong> ğŸ§  ê·¸ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ë‹¤ì–‘í•œ ë°©ë²•ì„ ________.
                </div>
                <div class="options">
                    <label class="option">
                        <input type="radio" name="q5" value="A">
                        <span>A. ì„¤ê±°ì§€í–ˆì–´ìš”</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q5" value="B">
                        <span>B. ì‹ ì²­í–ˆì–´ìš”</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q5" value="C">
                        <span>C. ì‹œë„í–ˆì–´ìš”</span>
                    </label>
                </div>
            </div>
            
            <button class="submit-button" onclick="submitTest4()">
                ğŸ“ Submit Test 4
            </button>
        </div>
    </div>

    <!-- Test 5 Page -->
    <div class="quiz-page" id="test5Page" style="display: none;">
        <h1>Test 5: Express Yourself!</h1>
        <div class="description">
            For this activity, write in Korean. Introduce yourself! Write about your day, or why you wanted to learn Korean, in as much detail as possible. Tell us fun facts about yourself like your MBTI, hobbies, etc.
        </div>
        
        <div class="quiz-container">
            <div class="question-item">
                <div class="question-text">
                    <strong>Writing Prompt:</strong><br>
                    Write about yourself in Korean! You can choose any or all of these topics:
                    <ul style="margin: 1rem 0; padding-left: 2rem; line-height: 1.6;">
                        <li>Introduce yourself</li>
                        <li>Describe your day</li>
                        <li>Why you wanted to learn Korean</li>
                        <li>Your hobbies and interests</li>
                        <li>Your MBTI personality type</li>
                        <li>Fun facts about yourself</li>
                    </ul>
                    Write as much as you can in Korean!
                </div>
                
                <div class="writing-section">
                    <label for="writingAnswer" class="question-label">Your Korean Writing:</label>
                    <textarea id="writingAnswer" name="writingAnswer" placeholder="í•œêµ­ì–´ë¡œ ì¨ë³´ì„¸ìš”! (Write in Korean!)" class="writing-input"></textarea>
                </div>
            </div>
            
            <button class="submit-button" onclick="submitTest5()">
                ğŸ“ Submit Test 5
            </button>
        </div>
    </div>

    <!-- Final Completion Page -->
    <div class="quiz-page" id="completionPage" style="display: none;">
        <h1>Congrats on Finishing!</h1>
        <div class="description">
            Now please enter your name and phone number below. Mr. Calvin will contact you with your results and tell you what you got right and wrong!
        </div>
        
        <div class="quiz-container">
            <div class="question-item">
                <div class="contact-form">
                    <div class="form-field">
                        <label for="studentName" class="question-label">Your Name:</label>
                        <input type="text" id="studentName" name="studentName" placeholder="Enter your full name..." class="form-input">
                    </div>
                    
                    <div class="form-field">
                        <label for="phoneNumber" class="question-label">Phone Number:</label>
                        <input type="tel" id="phoneNumber" name="phoneNumber" placeholder="Enter your phone number..." class="form-input">
                    </div>
                </div>
            </div>
            
            <button class="submit-button" onclick="submitContactInfo()">
                ğŸšª Exit
            </button>
        </div>
    </div>

    <canvas id="confetti" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 2147483648; display: none;"></canvas>

    <script>
        function showQuiz() {
            document.getElementById('titlePage').style.display = 'none';
            document.getElementById('disclaimerPage').style.display = 'flex';
        }
        
        function startActualQuiz() {
            document.getElementById('disclaimerPage').style.display = 'none';
            document.getElementById('quizPage').style.display = 'flex';
        }
        
        async function submitTest1() {
            const checkedBoxes = document.querySelectorAll('input[name="wrong-words"]:checked');
            const selectedAnswers = Array.from(checkedBoxes).map(cb => cb.value);
            
            // Prepare data for webhook
            const testData = {
                timestamp: new Date().toISOString(),
                test_number: 1,
                test_name: "Vocabulary - Which One's Wrong",
                selected_answers: selectedAnswers,
                user_agent: navigator.userAgent,
                quiz_id: generateQuizId()
            };
            
            // Save to webhook
            await saveToWebhook(testData);
            
            // Go directly to Test 2
            startTest2();
        }
        
        function startTest2() {
            // Hide current quiz page
            document.getElementById('quizPage').style.display = 'none';
            
            // Show Test 2
            document.getElementById('test2Page').style.display = 'flex';
        }
        
        async function submitTest2() {
            console.log('submitTest2 called');
            
            // Collect all radio button answers
            const answers = {};
            for (let i = 1; i <= 9; i++) {
                const selected = document.querySelector(`input[name="q${i}"]:checked`);
                answers[`q${i}`] = selected ? selected.value : null;
            }
            
            console.log('Test 2 answers collected:', answers);
            
            // Prepare data for webhook
            const testData = {
                timestamp: new Date().toISOString(),
                test_number: 2,
                test_name: "Grammar & Usage",
                selected_answers: answers,
                user_agent: navigator.userAgent,
                quiz_id: generateQuizId()
            };
            
            console.log('Test 2 data prepared:', testData);
            
            try {
                // Save to webhook
                await saveToWebhook(testData);
                console.log('Test 2 webhook call completed');
            } catch (error) {
                console.error('Test 2 webhook error:', error);
            }
            
            // Go to Test 3
            startTest3();
        }
        
        function startTest3() {
            // Hide Test 2
            document.getElementById('test2Page').style.display = 'none';
            
            // Show Test 3
            document.getElementById('test3Page').style.display = 'flex';
        }
        
        async function submitTest3() {
            console.log('submitTest3 called');
            
            // Get all text answers
            const answers = {
                q1: document.getElementById('answer1').value,
                q2: document.getElementById('answer2').value,
                q3: document.getElementById('answer3').value,
                q4: document.getElementById('answer4').value
            };
            
            console.log('Test 3 answers collected:', answers);
            
            // Prepare data for webhook
            const testData = {
                timestamp: new Date().toISOString(),
                test_number: 3,
                test_name: "K-Listening Check",
                selected_answers: answers,
                user_agent: navigator.userAgent,
                quiz_id: generateQuizId()
            };
            
            console.log('Test 3 data prepared:', testData);
            
            try {
                // Save to webhook
                await saveToWebhook(testData);
                console.log('Test 3 webhook call completed');
            } catch (error) {
                console.error('Test 3 webhook error:', error);
            }
            
            // Go to Test 4 (placeholder for now)
            startTest4();
        }
        
        function startTest4() {
            // Hide Test 3
            document.getElementById('test3Page').style.display = 'none';
            
            // Show Test 4
            document.getElementById('test4Page').style.display = 'flex';
        }
        
        async function submitTest4() {
            console.log('submitTest4 called');
            
            // Collect all radio button answers
            const answers = {};
            for (let i = 1; i <= 5; i++) {
                const selected = document.querySelector(`input[name="q${i}"]:checked`);
                answers[`q${i}`] = selected ? selected.value : null;
            }
            
            console.log('Test 4 answers collected:', answers);
            
            // Prepare data for webhook
            const testData = {
                timestamp: new Date().toISOString(),
                test_number: 4,
                test_name: "How Well Do You Know K-dramas",
                selected_answers: answers,
                user_agent: navigator.userAgent,
                quiz_id: generateQuizId()
            };
            
            console.log('Test 4 data prepared:', testData);
            
            try {
                // Save to webhook
                await saveToWebhook(testData);
                console.log('Test 4 webhook call completed');
            } catch (error) {
                console.error('Test 4 webhook error:', error);
            }
            
            // Go to Test 5
            startTest5();
        }
        
        function startTest5() {
            // Hide Test 4
            document.getElementById('test4Page').style.display = 'none';
            
            // Show Test 5
            document.getElementById('test5Page').style.display = 'flex';
        }
        
        async function submitTest5() {
            console.log('submitTest5 called');
            
            // Get the writing answer
            const writingAnswer = document.getElementById('writingAnswer').value;
            
            console.log('Test 5 writing collected:', writingAnswer);
            
            // Prepare data for webhook
            const testData = {
                timestamp: new Date().toISOString(),
                test_number: 5,
                test_name: "Express Yourself - Korean Writing",
                selected_answers: writingAnswer,
                user_agent: navigator.userAgent,
                quiz_id: generateQuizId()
            };
            
            console.log('Test 5 data prepared:', testData);
            
            try {
                // Save to webhook
                await saveToWebhook(testData);
                console.log('Test 5 webhook call completed');
            } catch (error) {
                console.error('Test 5 webhook error:', error);
            }
            
            // Quiz complete
            showQuizComplete();
        }
        
        function showQuizComplete() {
            console.log('showQuizComplete called');
            
            // Hide Test 5
            document.getElementById('test5Page').style.display = 'none';
            
            // Show completion page
            document.getElementById('completionPage').style.display = 'flex';
            
            console.log('Completion page displayed, starting confetti...');
            
            // Create canvas if it doesn't exist
            let canvas = document.getElementById('confetti');
            if (!canvas) {
                console.log('Canvas not found, creating new one');
                canvas = document.createElement('canvas');
                canvas.id = 'confetti';
                canvas.style.cssText = 'position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 2147483648; display: none;';
                document.body.appendChild(canvas);
            } else {
                // Update z-index on existing canvas
                canvas.style.zIndex = '2147483648';
            }
            
            // Start confetti animation after a short delay
            setTimeout(() => {
                createConfetti();
            }, 500);
        }
        
        function createConfetti() {
            console.log('createConfetti function called');
            
            const canvas = document.getElementById('confetti');
            if (!canvas) {
                console.error('Canvas element not found!');
                return;
            }
            
            const ctx = canvas.getContext('2d');
            if (!ctx) {
                console.error('Could not get canvas context!');
                return;
            }
            
            console.log('Canvas found, setting up confetti...');
            
            canvas.style.zIndex = '2147483648'; // Must be higher than quiz container
            canvas.style.display = 'block';
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            
            const confettiPieces = [];
            const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#f9ca24', '#f0932b', '#eb4d4b', '#6c5ce7'];
            
            console.log('Creating 100 confetti pieces...');
            
            // Create 100 confetti pieces
            for (let i = 0; i < 100; i++) {
                confettiPieces.push({
                    x: Math.random() * canvas.width,
                    y: -10,
                    vx: (Math.random() - 0.5) * 3,
                    vy: Math.random() * 3 + 2,
                    color: colors[Math.floor(Math.random() * colors.length)],
                    size: Math.random() * 8 + 4,
                    rotation: Math.random() * 360,
                    rotationSpeed: (Math.random() - 0.5) * 10
                });
            }
            
            console.log('Starting confetti animation...');
            
            function animateConfetti() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // Use backwards for loop to safely remove items while iterating
                for (let i = confettiPieces.length - 1; i >= 0; i--) {
                    const piece = confettiPieces[i];
                    piece.x += piece.vx;
                    piece.y += piece.vy;
                    piece.rotation += piece.rotationSpeed;
                    
                    ctx.save();
                    ctx.translate(piece.x, piece.y);
                    ctx.rotate(piece.rotation * Math.PI / 180);
                    ctx.fillStyle = piece.color;
                    ctx.fillRect(-piece.size/2, -piece.size/2, piece.size, piece.size);
                    ctx.restore();
                    
                    if (piece.y > canvas.height + 20) {
                        confettiPieces.splice(i, 1); // safe to remove
                    }
                }
                
                if (confettiPieces.length > 0) {
                    requestAnimationFrame(animateConfetti);
                } else {
                    console.log('Confetti animation complete');
                    canvas.style.display = 'none';
                }
            }
            
            animateConfetti();
        }
        
        async function submitContactInfo() {
            console.log('submitContactInfo called');
            
            // Get contact information
            const studentName = document.getElementById('studentName').value;
            const phoneNumber = document.getElementById('phoneNumber').value;
            
            // Validate required fields
            if (!studentName.trim()) {
                alert('Please enter your name before exiting.');
                return;
            }
            
            if (!phoneNumber.trim()) {
                alert('Please enter your phone number before exiting.');
                return;
            }
            
            console.log('Contact info collected:', { studentName, phoneNumber });
            
            // Prepare data for webhook
            const contactData = {
                timestamp: new Date().toISOString(),
                test_number: 'CONTACT',
                test_name: "Student Contact Information",
                selected_answers: `Name: ${studentName}, Phone: ${phoneNumber}`,
                user_agent: navigator.userAgent,
                quiz_id: generateQuizId()
            };
            
            console.log('Contact data prepared:', contactData);
            
            try {
                // Save to webhook
                await saveToWebhook(contactData);
                console.log('Contact info webhook call completed');
            } catch (error) {
                console.error('Contact info webhook error:', error);
            }
            
            // Show final message and exit
            alert('Thank you! Your information has been submitted. Mr. Calvin will contact you soon with your results!');
            
            // Hide the quiz
            document.getElementById('completionPage').style.display = 'none';
            
            // Show a simple thank you message
            document.body.innerHTML = `
                <style>
                    @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');
                </style>
                <div style="display: flex; align-items: center; justify-content: center; min-height: 100vh; background: url('https://cdn.shopify.com/s/files/1/0674/6747/7282/files/sky.png?v=1750990355') repeat; font-family: 'Press Start 2P', cursive; color: white; text-align: center; padding: 2rem;">
                    <div>
                        <h1 style="font-family: 'Press Start 2P', cursive; font-size: clamp(1.5rem, 6vw, 2.5rem); margin-bottom: 2rem; text-shadow: -2px -2px 0 #31afed, 2px -2px 0 #31afed, -2px 2px 0 #31afed, 2px 2px 0 #31afed, -2px 0 0 #31afed, 2px 0 0 #31afed, 0 -2px 0 #31afed, 0 2px 0 #31afed; line-height: 1.2;">ğŸ‰ Thank You! ğŸ‰</h1>
                        <p style="font-family: 'Press Start 2P', cursive; font-size: clamp(0.8rem, 3vw, 1rem); line-height: 1.6; max-width: 600px;">Your Korean Language Assessment is complete!<br><br>Mr. Calvin will contact you soon with your personalized results.</p>
                    </div>
                </div>
            `;
        }
        
        async function saveToWebhook(data) {
            const webhookUrl = 'https://script.google.com/macros/s/AKfycbwpX_Bm6-kH4xS0pVHl35JaF7U_Xppwq1oYKNjFkZOP3BaSprLpgPiSexr99LbCIhyEbg/exec';
            
            try {
                await fetch(webhookUrl, {
                    method: 'POST',
                    mode: 'no-cors',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(data)
                });
                console.log('Test data saved successfully:', data);
            } catch (error) {
                console.error('Error saving test data:', error);
                // Still continue with the quiz even if saving fails
            }
        }
        
        function generateQuizId() {
            // Generate a unique ID for this quiz session
            return 'quiz_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
        }
    </script>
</body>
</html>
